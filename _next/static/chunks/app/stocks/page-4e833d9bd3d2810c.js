(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{8648:function(e,t,c){Promise.resolve().then(c.bind(c,9382))},9382:function(e,t,c){"use strict";c.r(t),c.d(t,{default:function(){return g}});var n=c(7437),a=c(306),s=c(4260),r=c(1423),o=c(2575),i=c(6480),l=c(6782),h=c(4585),u=c(6593),d=c(3635),k=c(4033),x=c(2265);function f(e){let t=(0,k.useSearchParams)(),c=(0,k.useRouter)(),{width:a,height:f}=(0,d.dz)(),g=(0,d.a9)(),j=[],[m,p]=(0,x.useState)(0),[v,b]=(0,x.useState)(0),[S,w]=(0,x.useState)(j),[N,C]=(0,x.useState)([]),[E,_]=(0,x.useState)(!1),[Z,A]=(0,x.useState)(""),[I,P]=(0,x.useState)(""),R="https://e32lo3t2uikatpsxb6u2ewexqq0gvlvm.lambda-url.us-west-1.on.aws";return(0,x.useEffect)(()=>{let e=t.get("ticker")?decodeURIComponent(t.get("ticker")):null;_(!0),A(""),fetch("".concat(R,"/traders/").concat(g.id,"/stocks/"),{headers:{authorization:"Bearer ".concat(g.token)}}).then(e=>e.json()).then(t=>{let c=0;t.map((t,n)=>{t.ticker==e&&(c=n)}),C(t),(!t||!t[c]||t&&t[c]&&t[c].ticker!=e)&&e&&"S&P"!=decodeURIComponent(e)?(t.push({ticker:e,ticker_new:!0}),C(t),p(t.length-1)):p(c),t&&0!=t.length||P("Add a new stock ticker above to get started with charts..."),_(!1)}).catch(e=>{let t="Get Nav Items Error: ".concat(e);A(t),_(!1),console.log(t)})},[e]),(0,x.useEffect)(()=>{P(""),N.length>0&&m>=0&&c.push("/stocks?ticker=".concat(encodeURIComponent(N[m].ticker)))},[m,p]),(0,x.useEffect)(()=>{if(N.length>0&&m>=0){let t=h.g[v];_(!0),A(""),w(j);let c=[];for(var e=0;e<t.endpoint.length;e++){let n=t.endpoint[e];fetch("".concat(R,"/stocks/").concat(N[m].ticker,"/").concat(n,"?").concat(a<=500?"&width=430&height=430":""),{headers:{authorization:"Bearer ".concat(g.token)}}).then(e=>e.json()).then(e=>{e&&e.length>0&&(e[0].chart_url=n,w(c=[...c,...e])),_(!1)}).catch(e=>{let t="Active Chart Nav Select Error: ".concat(e);A(t),_(!1),console.log(t)})}}},[N,m,p,v]),(0,n.jsx)("main",{children:(0,n.jsxs)("div",{className:"bg-base-100 dark:bg-base-100",children:[(0,n.jsx)(i.Z,{trader:g,currentPage:"stock-ticker"}),(0,n.jsx)(u.Z,{data:N,activeTab:m,setActiveTab:p}),(0,n.jsxs)("div",{children:[(0,n.jsx)(h.Z,{activeChart:v,setActiveChart:b}),(0,n.jsx)(l.Z,{ticker:"".concat(N&&N[m]?N[m].ticker:"")}),""!=Z?(0,n.jsx)("p",{className:"text-center text-red-500 text-xs italic",children:Z}):null,E?(0,n.jsx)(o.Z,{}):null,""!=I?(0,n.jsx)("div",{className:"min-h-screen",children:(0,n.jsx)("p",{className:"text-center text-primary text-lg italic",children:I})}):null,(0,n.jsx)(s.Z,{data:S})]}),(0,n.jsx)(r.$,{ticker:"".concat(N&&N[m]?N[m].ticker:"")})]})})}function g(){return(0,n.jsx)(a.Z,{children:(0,n.jsx)(f,{})})}}},function(e){e.O(0,[719,396,666,515,971,596,744],function(){return e(e.s=8648)}),_N_E=e.O()}]);