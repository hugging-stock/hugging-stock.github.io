(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{8648:function(e,t,c){Promise.resolve().then(c.bind(c,9382))},9382:function(e,t,c){"use strict";c.r(t),c.d(t,{default:function(){return j}});var n=c(7437),s=c(306),a=c(4260),r=c(1423),i=c(2575),o=c(6480),l=c(6782),h=c(4585),u=c(6593),d=c(3635),k=c(4033),x=c(2265);function f(e){let t=(0,k.useSearchParams)(),c=(0,k.useRouter)(),{width:s,height:f}=(0,d.dz)(),j=(0,d.a9)(),m=[],[v,g]=(0,x.useState)(0),[p,b]=(0,x.useState)(0),[N,S]=(0,x.useState)(m),[w,C]=(0,x.useState)([]),[E,_]=(0,x.useState)(!1),[Z,A]=(0,x.useState)(""),[I,P]=(0,x.useState)(""),R="https://e32lo3t2uikatpsxb6u2ewexqq0gvlvm.lambda-url.us-west-1.on.aws";return(0,x.useEffect)(()=>{let e=t.get("ticker")?decodeURIComponent(t.get("ticker")):null;_(!0),A(""),fetch("".concat(R,"/traders/").concat(j.id,"/stocks/"),{headers:{authorization:"Bearer ".concat(j.token)}}).then(e=>e.json()).then(t=>{let c=0;t.map((t,n)=>{t.ticker==e&&(c=n)}),C(t),(!t||!t[c]||t&&t[c]&&t[c].ticker!=e)&&e&&"S&P"!=decodeURIComponent(e)?(t.push({ticker:e,ticker_new:!0}),C(t),g(t.length-1)):g(c),t&&0!=t.length||P("Add a new stock ticker above to get started with charts..."),_(!1)}).catch(e=>{let t="Get Nav Items Error: ".concat(e);A(t),_(!1),console.log(t)})},[e]),(0,x.useEffect)(()=>{P(""),w.length>0&&v>=0&&c.push("/stocks?ticker=".concat(encodeURIComponent(w[v].ticker)))},[v,g]),(0,x.useEffect)(()=>{if(w.length>0&&v>=0){let t=h.g[p];_(!0),A(""),S(m);let c=[];for(var e=0;e<t.endpoint.length;e++){let n=t.endpoint[e];fetch("".concat(R,"/stocks/").concat(w[v].ticker,"/").concat(n,"?").concat(s<=500?"&width=430&height=430":""),{headers:{authorization:"Bearer ".concat(j.token)}}).then(e=>e.json()).then(e=>{e&&e.length>0&&(e[0].chart_url=n,S(c=[...c,...e])),_(!1)}).catch(e=>{let t="Active Chart Nav Select Error: ".concat(e);A(t),_(!1),console.log(t)})}}},[w,v,g,p]),(0,n.jsxs)("main",{children:[(0,n.jsx)(o.Z,{trader:j,currentPage:"stock-ticker"}),(0,n.jsxs)("div",{className:"bg-base-100 dark:bg-base-100 mt-20 ".concat(s>1020?"ml-24":""),children:[(0,n.jsx)(u.Z,{data:w,activeTab:v,setActiveTab:g}),(0,n.jsxs)("div",{children:[(0,n.jsx)(h.Z,{activeChart:p,setActiveChart:b}),""!=Z?(0,n.jsx)("p",{className:"text-center text-red-500 text-xs italic",children:Z}):null,E?(0,n.jsx)(i.Z,{}):null,""!=I?(0,n.jsx)("div",{className:"min-h-screen",children:(0,n.jsx)("p",{className:"text-center text-primary text-lg italic",children:I})}):null,(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"inline-block",children:(0,n.jsx)(l.Z,{ticker:"".concat(w&&w[v]?w[v].ticker:"")})}),(0,n.jsx)("div",{className:"inline-block",children:(0,n.jsx)(a.Z,{data:N})})]})]})]}),(0,n.jsx)(r.$,{ticker:"".concat(w&&w[v]?w[v].ticker:"")})]})}function j(){return(0,n.jsx)(s.Z,{children:(0,n.jsx)(f,{})})}}},function(e){e.O(0,[719,396,666,515,971,596,744],function(){return e(e.s=8648)}),_N_E=e.O()}]);